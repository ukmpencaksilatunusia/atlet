<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Atlet Baru</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav>
        <h1>Pendaftaran Atlet</h1>
        <ul>
            <li><a href="index.html">Kembali</a></li>
        </ul>
    </nav>

    <div class="login-box" style="margin-top: 20px;">
        <h2>Formulir Registrasi</h2>
        <p>Isi data diri untuk bergabung.</p>
        <br>
        
        <form id="daftarForm">
            <div class="input-group">
                <label>Nama Lengkap</label>
                <input type="text" id="regNama" required>
            </div>
            <div class="input-group">
                <label>Cabang Olahraga</label>
                <select id="regCabor" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:4px;">
                    <option value="Lari">Lari</option>
                    <option value="Renang">Renang</option>
                    <option value="Bulu Tangkis">Bulu Tangkis</option>
                    <option value="Sepak Bola">Sepak Bola</option>
                </select>
            </div>
            <div class="input-group">
                <label>Username (untuk Login)</label>
                <input type="text" id="regUser" required>
            </div>
            <div class="input-group">
                <label>Password</label>
                <input type="password" id="regPass" required>
            </div>

            <button type="submit" class="btn" style="width: 100%;">DAFTAR SEKARANG</button>
        </form>
    </div>

    <script src="js/script.js"></script>
    <script>
        // Script khusus halaman daftar (ditaruh sini agar cepat)
        document.getElementById("daftarForm").addEventListener("submit", function(e){
            e.preventDefault();
            
            const btn = document.querySelector("button[type=submit]");
            btn.innerText = "Mendaftarkan...";
            btn.disabled = true;

            const data = {
                action: "daftar",
                nama: document.getElementById("regNama").value,
                cabor: document.getElementById("regCabor").value,
                username: document.getElementById("regUser").value,
                password: document.getElementById("regPass").value
            };

            fetch(ENDPOINT_URL, { // ENDPOINT_URL diambil dari js/script.js
                method: "POST",
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(d => {
                if(d.status === "sukses") {
                    alert("Pendaftaran Berhasil! Silakan Login.");
                    window.location.href = "login.html";
                } else {
                    alert("Gagal: " + d.pesan);
                    btn.innerText = "DAFTAR SEKARANG";
                    btn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>